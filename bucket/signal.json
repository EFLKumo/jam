{
    "version": "7.72.1",
    "description": "A cross-platform encrypted messaging service.",
    "homepage": "https://signal.org",
    "license": "GPL-3.0-only",
    "architecture": {
        "64bit": {
            "url": "https://updates.signal.org/desktop/signal-desktop-win-x64-7.72.1.exe#/dl.7z",
            "hash": "sha512:75695c71b1ff566b2f13f823ec52d1e6181a2572cf8cce134bc68d4e5c34d6ecaf7c2cfa5c887c3a339872f38f25670010a627baf1b6b48f8716cbbf9a84d35c",
            "pre_install": "Expand-7zipArchive \"$dir\\`$PLUGINSDIR\\app-64.7z\" \"$dir\""
        },
        "arm64": {
            "url": "https://updates.signal.org/desktop/signal-desktop-win-arm64-7.72.1.exe#/dl.7z",
            "hash": "sha512:c180eb5f88677edb9bab950dd6d72066d54ff2560af03d428e06f9b0189b544f861dc905f3591ebbd4192b53b7d7c175f6681e650f77740c9ac5574f18eca6ac",
            "pre_install": "Expand-7zipArchive \"$dir\\`$PLUGINSDIR\\app-arm64.7z\" \"$dir\""
        }
    },
    "post_install": [
        "Remove-Item \"$dir\\`$*\", \"$dir\\Uninstall*.exe\" -Recurse -Force",
        "$appDataPath = \"$env:APPDATA\\Signal\"",
        "$persistPath = \"$persist_dir\\Roaming\"",
        "if (Test-Path $appDataPath) {",
        "    Remove-Item $appDataPath -Recurse -Force",
        "}",
        "if (-Not (Test-Path $persistPath)) {",
        "    New-Item -Path \"$persistPath\" -ItemType Directory | Out-Null",
        "}",
        "New-Item -ItemType Junction -Path \"$appDataPath\" -Target \"$persistPath\" | Out-Null"
    ],
    "shortcuts": [
        [
            "Signal.exe",
            "Signal"
        ]
    ],
    "post_uninstall": [
        "$appDataPath = \"$env:APPDATA\\Signal\"",
        "if (Test-Path $appDataPath) {",
        "    Remove-Item $appDataPath -Recurse -Force",
        "}"
    ],
    "checkver": {
        "url": "https://updates.signal.org/desktop/latest.yml",
        "regex": "version:\\s([\\d.]+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://updates.signal.org/desktop/signal-desktop-win-x64-$version.exe#/dl.7z"
            },
            "arm64": {
                "url": "https://updates.signal.org/desktop/signal-desktop-win-arm64-$version.exe#/dl.7z"
            }
        },
        "hash": {
            "url": "$baseurl/latest.yml",
            "regex": "$basename\\s+sha512:\\s$base64"
        }
    },
    "notes": "You are suggested to disable \"Automatically download upates\" in Signal->Settings->General and use scoop to manage updates."
}
